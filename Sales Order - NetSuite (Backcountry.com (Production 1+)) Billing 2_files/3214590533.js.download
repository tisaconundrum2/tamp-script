function createTimeSelectorField(m,k,n,p,h){var b=NS.jQuery({});b.options=n;b.filters=p;b.filteredOptions=[];b.filteredFavourites=[];b.getFilters=function(){return b.filters};b.disabled=!1;b.isDisabled=function(){return b.disabled};b.setDisabled=function(a){b.disabled=a;b.trigger("disabledChanged")};b.getValue=function(){return a.valueField.val()};b.setValue=function(c,d){null==b.options[c]&&(c="CUSTOM");var e=b.getValue(),f=a.valueField;f.val(c);c=b.previousValue;b.previousValue=e;b.trigger("valueChanged");
"undefined"!==typeof d&&!d||0!=f.get(0).onchange()||(f.val(e),b.previousValue=c)};b.getTextForValue=function(a){return"CUSTOM"==a?h.labelCustom:(a=b.options[a])?a.text:h.labelCustom};b.getText=function(){return b.getTextForValue(b.getValue())};b.wasRelativeSelector=function(){return"RELATIVE"==b.previousValue};b.useWordBoundaries=function(){if("undefined"!==typeof b._useWordBoundaries)return b._useWordBoundaries;b._useWordBoundaries=!0;var a=0;NS.jQuery.each(b.options,function(c,e){b._useWordBoundaries=
e.text?-1!=e.text.search("(?:^|\\s|$)"+e.text.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")+"(?:^|\\s|$)")&&-1==e.text.search(/[\u4E00-\u9FFF]/):!1;if(!b._useWordBoundaries||20<a)return!1;a++});return b._useWordBoundaries};b.getFilterText=function(){return b.filterText};b.setFilterText=function(a){b.filterText=a;b.trigger("filterTextChanged")};b.filterText="";b.filterTextRegexps=[];b.filterTextFirstsRegexp=null;b.putOption=function(a,d,e){e||(e=!1);b.options[a]={value:a,text:d,favourite:e};b.trigger("optionsChanged")};
b.removeOption=function(a){delete b.options[a];b.trigger("optionsChanged")};b.addFavourite=function(a){b.options[a].favourite=!0;NS.jQuery.post(h.selectorServiceURL,{action:"addFavourite",key:a,type:h.selectorType});b.trigger("optionsChanged")};b.removeFavourite=function(a){b.options[a].favourite=!1;NS.jQuery.post(h.selectorServiceURL,{action:"removeFavourite",key:a,type:h.selectorType});b.trigger("optionsChanged")};b.resetTypeFilters=function(){var a=b.getFilters(),d;for(d in a)a.hasOwnProperty(d)&&
(a[d].selected=!1);b.trigger("typeFiltersChanged")};b.toggleTypeFilter=function(a){b.getFilters()[a].selected=!b.getFilters()[a].selected;b.trigger("typeFiltersChanged")};b.optionComparator=function(a,b){if(!a.value&&b.value)return-1;if(!b.value&&a.value)return 1;if(!a.value&&!b.value)return 0;var c=-1!=NS.jQuery.inArray(a.value,["CUSTOM","ALL","RELATIVE"]),d=-1!=NS.jQuery.inArray(b.value,["CUSTOM","ALL","RELATIVE"]);return c&&!d?-1:!c&&d?1:a.text<b.text?-1:a.text==b.text?a.value<b.value?-1:1:1};
b.prepareFilterRegexes=function(){b.useWordBoundaries()?b.prepareFilterRegexesNormal():b.prepareFilterRegexesNoWords()};b.prepareFilterRegexesNormal=function(){var a=null!=b.getFilterText()?b.getFilterText().replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"):"";b.filterTextRegexps=[];""!==a&&(b.filterTextRegexps=NS.jQuery.map(a.split(" "),function(a){return a?new RegExp("((?:^|\\s|$)"+a+")()","ig"):null}));if(/^\S{2,6}$/.test(a)){var d="";NS.jQuery.each(a.split(""),function(a,b){d+="((?:^|\\s|$)"+b+")(.*)"});
b.filterTextFirstsRegexp=new RegExp(d,"ig")}else b.filterTextFirstsRegexp=null};b.prepareFilterRegexesNoWords=function(){var a=null!=b.getFilterText()?b.getFilterText().replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"):"";b.filterTextRegexps=[];""!==a&&(b.filterTextRegexps=NS.jQuery.map(a.split(" "),function(a){return a?new RegExp("("+a+")()","ig"):null}));b.filterTextFirstsRegexp=null};b.getSortedOptionsWithoutDuplicates=function(){var a=NS.jQuery.map(b.options,function(a){return a});a.sort(b.optionComparator);
var d=[],e=null,f=b.getValue();NS.jQuery.each(a,function(a,b){null==e||b.text!=e.text?(d.push(b),e=b):b.value==f&&(d[d.length-1]=b)});return d};b.filterOptions=function(){b.filteredOptions=[];b.filteredFavourites=[];var a=b.getSortedOptionsWithoutDuplicates();b.prepareFilterRegexes();var d=[];NS.jQuery.each(a,function(a,c){var e=!0;NS.jQuery.each(b.getFilters(),function(a,b){if(b.selected&&0===(b.code&c.tagsCode))return e=!1});e&&d.push(c)});NS.jQuery.grep(d,function(a){var c=!1;null!=b.filterTextFirstsRegexp&&
(c=-1!=a.text.search(b.filterTextFirstsRegexp));c||(c=!0,NS.jQuery.each(b.filterTextRegexps,function(b,d){return-1==a.text.search(d)?c=!1:!0}));c&&(a.favourite?b.filteredFavourites.push(a):b.filteredOptions.push(a))})};var a={format:function(a,b){return a.replace(/\{\{|\}\}|\{(\w+)\}/g,function(a,c){return"{{"==a?"{":"}}"==a?"}":b[c]})},render:function(b,d){return a.format(b,d)}};a.rootElem=NS.jQuery("#"+m);a.popupElem=a.rootElem.find(".selector-popup");a.filterField=a.rootElem.find(".selector-filter-input");
a.valueField=a.rootElem.find("[name\x3d"+k+"]");a.allOptionsElem=a.rootElem.find(".selector-options");a.favouritesElem=a.rootElem.find(".selector-favourites");a.optionsElem=a.rootElem.find(".selector-all");a.typeFiltersElem=a.rootElem.find(".selector-filters");a.suppressMouseOver=!1;a.rootElem.data("controller",b);a.rootElem.prop("controller",b);a.renderValue=function(){a.filterField.val(b.getText())};a.renderOptions=function(){a.favouritesElem.empty();a.optionsElem.empty();b.filterOptions();var c=
[];NS.jQuery.merge(c,NS.jQuery.map(b.filterTextRegexps,function(a){return a.source}));null!=b.filterTextFirstsRegexp&&c.push(b.filterTextFirstsRegexp.source);var d=0===c.length?null:new RegExp(c.join("|"),"ig"),e=function(a){a=NS.jQuery.extend({},a);a.highlightedText=d&&a.text?a.text.replace(d,function(){for(var a="",b=1;b<arguments.length-2;b++){var c=arguments[b];"undefined"!=typeof c&&(a=1==b%2?a+("\x3cb\x3e"+c+"\x3c/b\x3e"):a+c)}return a}):a.text;return a};NS.jQuery.each(b.filteredOptions,function(b,
c){a.optionsElem.append(a.render('\x3cdiv class\x3d"selector-item" data-value\x3d"{value}" title\x3d"{text}"\x3e\x3cspan class\x3d"selector-star"\x3e\x26nbsp;\x3c/span\x3e{highlightedText}\x3c/div\x3e',e(c)))});NS.jQuery.each(b.filteredFavourites,function(b,c){a.favouritesElem.append(a.render('\x3cdiv class\x3d"selector-item" data-value\x3d"{value}" title\x3d"{text}"\x3e\x3cspan class\x3d"selector-star"\x3e\x26nbsp;\x3c/span\x3e{highlightedText}\x3c/div\x3e',e(c)))});var f=0===a.favouritesElem.children().length;
a.rootElem.find(".selector-favourites-container").toggleClass("selector-folder-disabled",f);f&&a.toggleFold(a.rootElem.find(".selector-all-container"),!1);0<c.length&&(a.toggleFold(a.rootElem.find(".selector-all-container"),!1),a.toggleFold(a.rootElem.find(".selector-favourites-container"),!1));var g=b.getValue();a.rootElem.find(".selector-item").filter(function(a,b){return NS.jQuery(b).data()==g}).addClass("selector-selected")};a.renderTypeFilters=function(){a.typeFiltersElem.empty();var c,d,e=function(){c=
NS.jQuery(document.createElement("tr"));a.typeFiltersElem.append(c);d=3};e();NS.jQuery.each(b.filters,function(f,g){0===d&&e();c.append(a.render('\x3ctd class\x3d"selector-filter-button" data-filter\x3d"{value}"\x3e\x3cspan\x3e{text}\x3cspan\x3e\x3c/td\x3e',g));f=c.children().last();g=f.children().width();g=g>2*f.width()?3:g>f.width()?2:1;if(d<g){var h=c,k=d;e();f.detach();for(f.appendTo(c);0<k;k--)h.append(document.createElement("td"))}d-=g;f.attr("colspan",g);b.getFilters()[f.data("filter")].selected?
f.addClass("checked"):f.removeClass("checked")})};a.openPopup=function(){var c=NS.jQuery(window);0<a.rootElem.closest("#fieldset_options_div").length&&a.rootElem.closest(".uir-tooltip-content").css("overflow","visible");a.filterField.parent().css("z-index","1001");a.popupElem.find(".selector-input-spacer").remove();a.popupElem.removeClass("above below below-fixed");a.popupElem.find(".selector-popup-fixedposition").css({position:"",top:"",bottom:""});c.off("."+k);var d=a.rootElem.parents().filter(function(a,
b){return"visible"!=NS.jQuery(b).css("overflow")||"BODY"==b.tagName}).first(),e=a.filterField.offset().top-d.offset().top;d=d.offset().top+d.height()-45-a.filterField.offset().top;if(270>e&&270>d&&0===a.rootElem.closest("#outerwrapper").length){var f=function(){var b=a.filterField.offset().top;return{top:b-c.scrollTop(),bottom:c.height()-b+c.scrollTop(),left:a.filterField.offset().left-c.scrollLeft()}};e=f();270>e.bottom?(a.popupElem.addClass("above"),a.popupElem.prepend('\x3cdiv class\x3d"selector-input-spacer bottom"\x3e\x3c/div\x3e'),
d=function(){var b=f();a.popupElem.find(".selector-popup-fixedposition").css({position:"fixed",bottom:b.bottom+3+"px",left:b.left-5+"px"})},a.allOptionsElem.height(Math.max(e.top-110,150))):(a.popupElem.addClass("below"),a.popupElem.prepend('\x3cdiv class\x3d"selector-input-spacer top"\x3e\x3c/div\x3e'),d=function(){var b=f();a.popupElem.find(".selector-popup-fixedposition").css({position:"fixed",top:b.top+28+"px",left:b.left-5+"px"})},a.allOptionsElem.height(Math.max(e.bottom-140,150)));d();c.on("scroll."+
k,d);c.on("resize."+k,d)}else 270>e||e<d?(a.popupElem.addClass("below"),a.popupElem.prepend('\x3cdiv class\x3d"selector-input-spacer top"\x3e\x3c/div\x3e'),a.allOptionsElem.height(Math.max(d-95,150))):(a.popupElem.addClass("above"),a.popupElem.append('\x3cdiv class\x3d"selector-input-spacer bottom"\x3e\x3c/div\x3e'),a.allOptionsElem.height(Math.max(e-95,150)));a.popupElem.find(".selector-input-spacer").width(a.filterField.outerWidth()+8);a.rootElem.find(".i_dropdownarrow").hide();a.renderOptions();
a.filterField.val("");b.setFilterText("");a.popupElem.show();a.renderTypeFilters()};a.closePopup=function(){NS.jQuery(window).off("."+k);a.filterField.parent().css("z-index","auto");a.popupElem.hide();a.rootElem.find(".i_dropdownarrow").show();b.setFilterText("");a.renderValue();b.resetTypeFilters()};a.isPopupOpen=function(){return"none"!=a.popupElem.css("display")};a.toggleFold=function(a,b){var c=null==b?null:!b;a.toggleClass("selector-folder-closed",b);a.toggleClass("selector-folder-open",c)};
a.isFolderDisabled=function(a){return a.hasClass("selector-folder-disabled")};b.on("optionsChanged",function(){a.renderOptions();!b.options[b.getValue()]&&b.filteredOptions&&0<b.filteredOptions.length&&b.setValue(b.filteredOptions[0].value)});b.on("valueChanged",function(){a.renderValue()});b.on("typeFiltersChanged",function(){a.renderTypeFilters();a.renderOptions()});b.on("filterTextChanged",function(){a.renderOptions()});b.on("disabledChanged",function(){var c=b.isDisabled();a.filterField.prop("disabled",
c);c?(a.filterField.closest(".uir-field").addClass("effectDisabled"),a.closePopup()):a.filterField.closest(".uir-field").removeClass("effectDisabled")});a.rootElem.find(".nldropdown").on("click",function(){a.isPopupOpen()||b.isDisabled()||a.openPopup()});a.filterField.on("focus",function(){a.isPopupOpen()||b.isDisabled()||a.openPopup()});var l;a.filterField.on("keyup",function(c){l&&clearTimeout(l);-1==[13,27,38,40].indexOf(c.which)&&(l=setTimeout(function(){b.setFilterText(a.filterField.val())},
200))});a.allOptionsElem.find(".selector-favourites-container h3").on("click",function(){var b=a.favouritesElem.parent();a.isFolderDisabled(b)||a.toggleFold(b)});a.allOptionsElem.find(".selector-all-container h3").on("click",function(){var b=a.optionsElem.parent();a.isFolderDisabled(b)||a.toggleFold(b)});a.rootElem.on("click",".selector-item",function(){b.setValue(NS.jQuery(this).data("value"));a.closePopup();a.filterField.blur();return!1});a.rootElem.on("click",".selector-all .selector-star",function(){var a=
NS.jQuery(this).closest("[data-value]").data("value");b.addFavourite(a);return!1});a.rootElem.on("click",".selector-favourites .selector-star",function(){var a=NS.jQuery(this).closest("[data-value]").data("value");b.removeFavourite(a);return!1});a.rootElem.find(".selector-filters").on("click","td",function(){b.toggleTypeFilter(NS.jQuery(this).data("filter"))});NS.jQuery(document).on("mouseup",function(b){a.isPopupOpen()&&(a.popupElem.is(b.target)||0!==a.popupElem.has(b.target).length||a.filterField.is(b.target)||
0!==a.filterField.has(b.target).length||a.closePopup())});a.filterField.on("keypress",function(c){if(a.isPopupOpen()&&27==c.which)a.filterField.blur(),a.closePopup();else if(13==c.which){var d=a.allOptionsElem.find(".selector-selected");0<d.length&&(a.closePopup(),a.filterField.blur(),b.setValue(d.data("value")));c.preventDefault();return!1}return!0});a.filterField.on("keydown",function(b){if(38==b.which||40==b.which){b.preventDefault();var c=a.allOptionsElem.find(".selector-selected"),e=a.allOptionsElem.find(".selector-item").filter(":visible"),
f;0===c.length?38==b.which?f=e.last():40==b.which&&(f=e.first()):38==b.which?(f=c.prev(),0===f.length&&c.parent().is(a.optionsElem)&&(f=a.favouritesElem.find(".selector-item:last"))):40==b.which&&(f=c.next(),0===f.length&&c.parent().is(a.favouritesElem)&&(f=a.optionsElem.find(".selector-item:first")));if(0!==f.length){a.toggleFold(f.parent().parent(),!1);b=a.allOptionsElem.position().top;c=a.allOptionsElem.outerHeight(!0);e=a.allOptionsElem.scrollTop();var g=f.position().top,h=f.outerHeight(!0);0>
g-b?(a.suppressMouseOver=!0,a.allOptionsElem.scrollTop(e+g-b)):0<g+h-b-c&&(a.suppressMouseOver=!0,a.allOptionsElem.scrollTop(e+g+h-b-c));a.allOptionsElem.find(".selector-selected").removeClass("selector-selected");f.addClass("selector-selected")}}});a.popupElem.on("mouseover",".selector-item",function(b){a.suppressMouseOver?a.suppressMouseOver=!1:(b=NS.jQuery(b.target).closest(".selector-item"),a.popupElem.find(".selector-selected").removeClass("selector-selected"),b.addClass("selector-selected"))});
b.setValue(b.getValue(),!1);b.setDisabled(h.disabled)};
//# sourceMappingURL=/assets/legacy_timeselector/3214590533.map