slavingUtil=function(){function w(b){function c(a,b,d,c){c=c?!1:!0;!0===a.isMachineField?e.setCurrentLineItemValue(a.machineName,a.fieldName,b,d,c):a.isMultiSelectField?e.setFieldValues(a.fieldName,b,d,c):e.setFieldValue(a.fieldName,b,d,c)}function a(a){null!==d.getFieldOptions()&&null===d.getFieldOptions().get(a.machineName,a.fieldName,a.lineNum)&&d.getFieldOptions().put(a.machineName,a.fieldName,a.lineNum,[]);return d.getFieldOptions().get(a.machineName,a.fieldName,a.lineNum)}var e=b.currentRecord,
d=b.util;this.setFieldNoSlaving=function(a,b){d.setFieldNoSlaving(a.machineName,a.fieldName,a.lineNum,b)};this.getValue=function(a){!0===a.isMachineField?a.ln&&-1!==a.ln?(a=e.getLineItemValue(a.machineName,a.fieldName,a.ln),a=null===a||void 0===a?"":a):a=e.getCurrentLineItemValue(a.machineName,a.fieldName):a=a.isMultiSelectField?e.getFieldValues(a.fieldName):e.getFieldValue(a.fieldName);return a};this.setValue=c;this.setSelectValue=function(a,b,d,k){b||""===b?c(a,b,k):!0===a.isMachineField?e.setCurrentLineItemText(a.machineName,
a.fieldName,d,k,!0):e.setText({fieldId:a.fieldName,value:b,fireFieldChange:k,noslaving:!0})};this.removeOption=function(b,d){b=a(b);if(0<b.length)if(d||0===d){a:{for(var c=0;c<b.length;c++)if(b[c].id==d){d=c;break a}d=-1}b.splice(d,1)}else b.splice(0,b.length)};this.insertOption=function(b,d,c){(b=a(b))&&b instanceof Array&&b.push({text:c,id:d})};this.isEditableSublist=d.isEditableSublist;this.isFieldMultiSelect=d.isFieldMultiSelect;this.returnEmptyIfNull=x;this.isValEmpty=y;this.getCurrentLineItemIndex=
function(a){return e.getCurrentSublistIndex({sublistId:a})};this.triggerPostSourcing=d.postSourcing}function u(){function b(a){return!0===a.isMachineField?nlapiGetLineItemField(a.machineName,a.fieldName,a.lineNum):nlapiGetField(a.fieldName)}function c(a,b,d){a=getFormElement(a,getFieldName(b));null!=a&&(null!=d?deleteOneSelectOption(a,d):deleteAllSelectOptions(a,window))}this.setFieldNoSlaving=function(a,c){if(a=b(a))a.noslaving=c};this.getValue=function(a){return!0===a.isMachineField?a.ln?x(nlapiGetLineItemValue(a.machineName,
a.fieldName,a.ln)):nlapiGetCurrentLineItemValue(a.machineName,a.fieldName):a.isMultiSelectField?nlapiGetFieldValues(a.fieldName):nlapiGetFieldValue(a.fieldName)};this.setValue=function(a,b,d){!0===a.isMachineField?nlapiSetCurrentLineItemValue(a.machineName,a.fieldName,b,d,!0):a.isMultiSelectField?nlapiSetFieldValues(a.fieldName,b,d,!0):nlapiSetFieldValue(a.fieldName,b,d,!0)};this.setSelectValue=function(a,b,d,c){!0===a.isMachineField?nlapiSetCurrentLineItemSelectValue(a.machineName,a.fieldName,b,
d,c,getSlavingAsync()):nlapiSetSelectValue(a.fieldName,d,c,getSlavingAsync())};this.removeOption=function(a,b){if(!0===a.isMachineField)c(document.forms[a.machineName+"_form"],a.fieldName,b);else{a=a.fieldName;var d="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(a)]?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms[0];c(d,a,b)}};this.insertOption=function(a,b,d){if(!0===a.isMachineField)a=getFormElement(document.forms[a.machineName+"_form"],getFieldName(a.fieldName)),null!=a&&addSelectOption(document,
a,d,b);else{a=a.fieldName;var c="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(a)]?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms[0];a=getFormElement(c,getFieldName(a));null!=a&&addSelectOption(document,a,d,b)}};this.isEditableSublist=isEditMachine;this.isFieldMultiSelect=function(a,c,d){return(a=b({isMachineField:!!a,machineName:a,fieldName:c,lineNum:d}))?"multiselect"===a.getType():!1};this.serverCall=nsServerCall;this.returnEmptyIfNull=emptyIfNull;this.isValEmpty=y;this.getCurrentLineItemIndex=
nlapiGetCurrentLineItemIndex}function z(b,c,a){var e=a?new w(a):new u,d=a?!1:!0,f=c.hasOwnProperty("lineNum")&&null!=c.lineNum?c.lineNum:null,l=c.sublistName||c.sublistId,g=A(b[h.QUERY_URL]),k=g[B.URL];g=g[B.PAYLOAD];if("T"===b[h.EDIT]){if((a=a?a.currentRecord.id:e.getValue({fieldName:"id"}))||0===a)g.id=String(a);"T"!==b[h.DISPLAY_ONLY]&&(g.e="T")}g.q=c.queryFieldName;g.si=c.queryFieldValue;l&&(g.machine=l);0!=c.fieldspec.length&&(g.f=c.fieldspec);"T"===b[h.MULTILINE]&&0<f&&(g.ln=String(f));if(!D(d,
b,f,g,e))return null;b[h.MASTER]&&""!==b[h.MASTER]&&(c=b[h.MASTER],b=c[h.FIELD_OBJECT.NAME],c=c.hasOwnProperty(h.FIELD_OBJECT.MACHINE)?c[h.FIELD_OBJECT.MACHINE]:null,g["si_"+b]=e.getValue({isMachineField:null!==c,machineName:c,fieldName:b,ln:f}));return{url:k,payload:g}}function D(b,c,a,e,d){c=c[h.AUX_FIELDS];for(var f=0;c&&f<c.length;f++){var l=c[f],g=l.hasOwnProperty(h.FIELD_OBJECT.NAME)?l[h.FIELD_OBJECT.NAME]:"",k=l.hasOwnProperty(h.FIELD_OBJECT.MACHINE)?l[h.FIELD_OBJECT.MACHINE]:null,m=l.hasOwnProperty(h.FIELD_OBJECT.HTML_REF)?
l[h.FIELD_OBJECT.HTML_REF]:null;k=d.getValue({isMachineField:null!==k,machineName:k,fieldName:g,ln:a});b&&!k&&0!==k&&""!==k&&(k=eval(m));if(E(l,k,"T"===l[h.FIELD_OBJECT.REQUIRED]))return!1;e["si_"+g]=k}return!0}function A(b){var c={};if(-1!==b.indexOf("?")){var a=b.split("?");b=a[0];if(0<a[1].length){a=a[1].split("\x26");for(var e=0;e<a.length;e++)if(0<a[e].length){var d=a[e].split("\x3d");c[d[0]]=String(d[1])}}}return{url:b,payload:c}}function E(b,c,a){var e=!0;b.hasOwnProperty(h.FIELD_OBJECT.REQUIRED_SCRIPT)&&
(e=eval(b[h.FIELD_OBJECT.REQUIRED_SCRIPT])?!0:!1);b.hasOwnProperty(h.FIELD_OBJECT.IS_REQUIRED)&&b.isRequired&&(e=!0);b=c&&0!=c.length?!0:!1;return a&&e&&!b}function r(b){b=b.replace(/\\/g,"\\\\");b=b.replace(/'/g,"\\'");return b=b.replace(/"/g,'\\"')}function v(b){return"[object Function]"===Object.prototype.toString.call(b)}function F(b,c,a){var e=c.hasOwnProperty(n.FIRE_FIELDCHANGE),d=c.hasOwnProperty(n.IS_CLIENT_SLAVING);b.setFieldNoSlaving(a,!e);var f=c[n.OPTIONS];if(f){var l=b.getValue(a),g=
!1;b.removeOption(a);for(var k=0;k<f.length;k++){var m=f[k];b.insertOption(a,m[0],m[1]);l===m[0]&&(g=!0)}b.isValEmpty(c[n.VALUE])&&!b.isValEmpty(l)&&g&&b.setValue(a,l,!1)}if(null==c[n.NO_OVERRIDE]||b.isValEmpty(b.getValue(a)))if(f="boolean"===typeof c[n.CONDITION]?c[n.CONDITION]:eval(c[n.CONDITION]),!c.hasOwnProperty(n.CONDITION)||f)c.hasOwnProperty(n.TEXT)?b.setSelectValue(a,c[n.VALUE],c[n.TEXT],e,d):c.hasOwnProperty(n.VALUE)&&b.setValue(a,c[n.VALUE],e,d)}function G(b,c){var a="undefined"!=typeof ftabs&&
null!=ftabs[getFieldName(b)]?document.forms[ftabs[getFieldName(b)]+"_form"]:document.forms[0];b=getFormElement(a,getFieldName(b));return null!=b?"multiselect"===c?getMultiDropdown(b,window).getValues():getDropdown(b,window).getValues():null}function H(b,c){var a="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(b)]?document.forms[ftabs[getFieldName(b)]+"_form"]:document.forms[0];b=getFormElement(a,getFieldName(b));return null!=b?"multiselect"===c?getMultiDropdown(b,window).textArray:getDropdown(b,
window).getTexts():null}function I(b,c,a){b=getFormElement(document.forms[b+"_form"],getFieldName(c));return null!=b?"multiselect"===a?getMultiDropdown(b,window).getValues():getDropdown(b,window).getValues():null}function J(b,c,a){b=getFormElement(document.forms[b+"_form"],getFieldName(c));return null!=b?"multiselect"===a?getMultiDropdown(b,window).textArray:getDropdown(b,window).getTexts():null}function y(b){if(null===b||void 0===b)return!0;b=String(b);return 0===b.length||!/\S/.test(b)}function x(b){return null!=
b?b:""}var h={QUERY_URL:"queryurl",EDIT:"edit",DISPLAY_ONLY:"displayonly",AUX_FIELDS:"auxfields",MULTILINE:"ln",MASTER:"master",FIELD_OBJECT:{NAME:"name",MACHINE:"machine",HTML_REF:"htmlReference",REQUIRED:"required",REQUIRED_SCRIPT:"requiredScript",IS_REQUIRED:"isRequired"}},B={URL:"url",PAYLOAD:"payload"},n={NAME:"name",MACHINE_NAME:"machine",FIRE_FIELDCHANGE:"firechange",IS_CLIENT_SLAVING:"isClientSlaving",OPTIONS:"options",VALUE:"value",TEXT:"text",NO_OVERRIDE:"nooverride",CONDITION:"condition"};
return{cleanupQueryURL:A,getQueryRequest:z,getURL:function(b,c){c=z(b,c,void 0);b=c.url;c=c.payload;-1==b.indexOf("?")&&(b+="?");var a=!0,e;for(e in c)a?a=!1:b+="\x26",b=0===e.indexOf("si_")||"q"===e||"si"===e||"id"===e?b+e+"\x3d"+encodeURIComponent(emptyIfNull(c[e])):b+e+"\x3d"+emptyIfNull(c[e]);return b},processSlavingValues:function(b,c,a){for(var e=c?new w(c):new u,d=0;b&&d<b.length;d++){var f=b[d],l=f[n.NAME],g=f.hasOwnProperty(n.MACHINE_NAME),k=g?f[n.MACHINE_NAME]:null,m=g?e.getCurrentLineItemIndex(k):
-1;g={isMachineField:g,machineName:k,fieldName:l,lineNum:m};g.isMultiSelectField=e.isFieldMultiSelect(k,l,m);if(v(f))a?a(f.toString()+";"+f.name+"();"):f(e);else try{F(e,f,g)}catch(C){if(e instanceof u)e.serverCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Excepion in processing values",C.msg+",path \x3d  "+(c?"":window.location.pathname)]);else throw C;}finally{null==c&&e.setFieldNoSlaving(g,!1)}}},verifySlavingValues:function(b,c){try{for(var a=0;b&&a<b.length;a++)for(var e=
0;c&&e<c.length;e++){var d=c[e];if(!(v(d)||d.name!=b[a][0]||null!=d.machine&&d.machine!=b[a][1]||null==d.machine&&""!=b[a][1])){var f=d.options,l=nlapiGetLineItemField(d.machine,d.name);if(null!=d.machine){if(null!=f){var g=I(d.machine,d.name,l.type),k=J(d.machine,d.name,l.type);if(g.length!=f.length)nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Length mismatch","Options length do not match. Field name:"+d.name+" ,path \x3d "+window.location.pathname]);else for(var m=
0;f&&m<f.length;m++){var h=f[m],n=r(g[m]),t=r(k[m]);t=t.replace("\n","");if(h[0]!=n){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving value do not match. Field name:"+d.name+" jsonValue \x3d"+h[0]+" legacyValue \x3d "+g[m]+" ,path \x3d "+window.location.pathname]);break}if(h[1]!=t){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving text do not match. Field name:"+
d.name+" jsonValue \x3d"+h[1]+" legacyValue \x3d "+k[m]+" ,path \x3d "+window.location.pathname]);break}}}if(null==d.nooverride&&(null==d.condition||eval(d.condition))){var p=nlapiGetCurrentLineItemValue(d.machine,d.name);p=r(p);null!=d.value&&d.value!=p&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+d.name+", jsonText \x3d "+d.value+", actualValue  \x3d "+p+" ,path \x3d "+window.location.pathname]);
if(null!=d.text){var q=nlapiGetCurrentLineItemText(d.machine,d.name);q=r(q);d.text!=q&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+d.name+", jsonText \x3d "+d.text+", actualValue  \x3d "+q+" ,path \x3d "+window.location.pathname])}}}else{p=nlapiGetFieldValue(d.name);p=r(p);f=d.options;l=nlapiGetField(d.name);if(null!=f)if(g=G(d.name,l.type),k=H(d.name,l.type),g.length!=f.length)nsServerCall("/app/common/scripting/nlapijsonhandler.nl",
"logSlavingError",["Json option Length mismatch","Options length do not match. Field name:"+d.name+" ,path \x3d "+window.location.pathname]);else for(m=0;f&&m<f.length;m++){h=f[m];n=r(g[m]);t=r(k[m]);t=t.replace("\n","");if(h[0]!=n){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving value do not match. Field name:"+d.name+" jsonValue \x3d"+h[0]+" legacyValue \x3d "+g[m]+" ,path \x3d "+window.location.pathname]);break}if(h[1]!=
t){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving text do not match. Field name:"+d.name+" jsonValue \x3d"+h[1]+" legacyValue \x3d "+t[m]+" ,path \x3d "+window.location.pathname]);break}}null!=d.nooverride||null!=d.condition&&!eval(d.condition)||(null!=d.value&&d.value!=p&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+d.name+
", jsonText \x3d "+d.value+", actualValue  \x3d "+p+" ,path \x3d "+window.location.pathname]),null!=d.text&&(q=nlapiGetFieldText(d.name),q=r(q),d.text!=q&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+d.name+", jsonText \x3d "+d.text+", actualValue  \x3d "+q+" ,path \x3d "+window.location.pathname])))}}}}catch(K){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Excepion in verifying values",
K.msg+" ,path \x3d "+window.location.pathname])}},redrawEditMachines:function(b){for(var c in b){var a=b[c];if(null!=a.edit&&(null==a.nooverride||1==document.forms[0].elements["next"+c+"idx"].value)){for(var e=a.data,d="",f=0;e&&f<e.length;f++){for(var h=e[f],g=0;h&&g<h.length;g++)""!=d&&(d+=String.fromCharCode(1)),d+=h[g];f!=e.length-1&&(d+=String.fromCharCode(2))}document.forms[0].elements[c+"data"].value=d;clearLineArray(name);document.forms[0].elements["next"+c+"idx"].value=null==e?1:e.length+
1;document.forms[0].elements[c+"valid"].value="T";setMachineContentUpdated(c,!0);clearLineArray(name);null!=parent.document.forms.main_form.elements[c+"loaded"]&&(parent.document.forms.main_form.elements[c+"loaded"].value="T");null!=parent.document.forms.main_form.elements[c+"dotted"]&&(parent.document.forms.main_form.elements[c+"dotted"].value="T");null!=window[c+"_machine"]&&(window[c+"_machine"].refresheditmachine(!0),window[c+"_machine"].recalc());e=parent.document.getElementById(c+"lnkdot");
null!=e&&(e.style.display="")}v(a.metadata)&&a.metadata.call()}}}}();"function"==typeof Object.freeze&&(slavingUtil=Object.freeze(slavingUtil));
//# sourceMappingURL=/assets/legacy_slavingutil/1526887140.map